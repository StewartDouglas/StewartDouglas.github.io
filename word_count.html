<!DOCTYPE html>
<html lang="en">
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   ~~~ Word Count - Stewar Douglas ~~~

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<head>
	<title>Word Count</title>
	<!--STYLES-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<!--STYLES END-->
</head>
<body>
	<div class="container">
		<!-- INPUT -->		
		<div class="row centered">
			<div class="col-lg-12">			
				<div class="row centered">
					<!-- Provide explanation of what this tool does --> 
				</div>
			</div>			
			<div class="col-lg-12">			
				<div class="row centered">
					<textarea id="input_text"></textarea>
				</div>
				<div class="row centered">
					<button type="button" id="count">Count</button>
				</div>		
			</div>
		</div>
		<!-- INPUT END-->	

		<!-- RESULTS -->
		<div class="row centered">
			<div class="col-lg-12">
				<div id="frequency_chart"></div>
			</div>
		</div>
		<!-- RESULTS END -->		
	</div>

	<!--SCRIPTS-->
		<!--EXTERNAL SCRIPTS-->
		<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    	<script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart']}]}"></script>
		<!--EXTERNAL SCRIPTS END-->

		<!-- STEWART'S SCRIPT -->
		<script>
			$('#count').on('click',function(){
				var lookup_table = new Object(); // Our dictionary: word => word_count
				var text_raw = document.getElementById('input_text').value;
				var word_array = text_raw.split(" "); // Our array of words
				var array_length = word_array.length;
				
				// Place the count of each word in the Object lookup_table
				for(var i = 0; i < array_length; ++i){
					if(word_array[i] in lookup_table){
					// if the word is already in our dictionary, increment it's value by one
						lookup_table[word_array[i]] += 1; 
					} else {
					// if the word is not in our dictionary, add it with an initial value of one
						lookup_table[word_array[i]] = 1;
					}
				};

				// Convert our dictionary into an array of arrays [ [word1, count1], [...], ... ]
				// so it can be consumed by Google Chart Tools
				var data_table = [];
				for (var key in lookup_table){
					new_element = [key,lookup_table[key]];
					data_table.push(new_element);
				}
    			
			    (function drawChart() {

			      var data = new google.visualization.DataTable(); // Google Chart Tools requires the data to be wrapped in this class
			      data.addColumn('string', 'Word');
			      data.addColumn('number', 'Count');

			      data.addRows(data_table);

			      var options = {
			        width: 1000,
			        height: 563,
			        hAxis: {
			          title: 'Word Count',
			          format: 'h:mm a',
			          gridlines: {count: 10}
			        },
			        vAxis: {
			          title: 'Occurances'
			        }
			      };

			      // Finally, render the chart
			      var chart = new google.visualization.ColumnChart(
			        document.getElementById('frequency_chart'));
			      	chart.draw(data, options);
			    })();
      
			});
		</script>
		<!-- STEWART'S SCRIPT END-->		
	<!--SCRIPTS END-->
</body>
</html>